(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[20],{432:function(e,t,a){var r=a(453);"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a(7).default;n("4d019fee",r,!1,{sourceMap:!1,shadowMode:!1})},452:function(e,t,a){"use strict";var r=a(432),n=a.n(r);n.a},453:function(e,t,a){var r=a(6);t=r(!1),t.push([e.i,"\n.avatar-border[data-v-317319ed] {\r\n  border-style: solid !important;\r\n  border-width: 1px !important;\r\n  border-color: gray !important;\n}\n.imagen[data-v-317319ed] {\r\n  opacity: 0.8;\n}\r\n",""]),e.exports=t},466:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("h2",[e._v("Información general del negocio")])]),e.lectura?a("v-col",{staticClass:"d-flex justify-end",attrs:{cols:"6"}},[a("v-btn",{staticClass:"btn-editar",attrs:{outlined:"",color:"verde",disabled:e.editar},on:{click:function(t){e.editar=!0}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-file-document-edit-outline")]),e._v("Editar ")],1),a("v-btn",{attrs:{color:"verde",disabled:!e.editar,dark:e.editar,depressed:""},on:{click:e.actualizar}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-content-save")]),e._v("Guardar cambios ")],1)],1):e._e(),a("v-col",{attrs:{cols:"12"}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-row",[""==e.imagenUrl?a("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[a("v-img",{staticClass:"imagen",attrs:{src:"https://firebasestorage.googleapis.com/v0/b/no-te-rajes-mx.appspot.com/o/images%2Ffoto-perfil.png?alt=media&token=dc412219-f809-4a86-b9c9-1a7a8b6a27e2","max-width":"500px"}})],1):e._e(),""!=e.imagenUrl?a("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[a("v-avatar",{staticClass:"avatar-border",attrs:{size:"300"}},[a("v-img",{attrs:{src:e.imagenUrl,"max-height":"500",contain:""}})],1)],1):e._e(),a("v-row",{staticClass:"d-flex justify-center"},[a("v-col",{attrs:{cols:"6"}},[a("v-btn",{attrs:{disabled:!e.editar,block:"",color:"purple lighten-1",dark:e.editar,large:"",elevation:"0"},on:{click:function(t){return e.$refs.boton.click()}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-camera")]),e._v("Subir foto de perfil ")],1)],1)],1),a("v-col",{attrs:{cols:"12"}},[a("input",{ref:"boton",staticClass:"d-none",attrs:{type:"file",accept:"image/*"},on:{change:function(t){return e.cargarImagen(t)}}})])],1)],1),e.lectura?e._e():a("v-col",{staticClass:"d-flex justify-end btn",attrs:{cols:"12"}},[a("v-btn",{attrs:{color:"verde",dark:"",large:"",elevation:"0",block:""},on:{click:e.siguiente}},[e._v("Continuar")])],1)],1)],1)},n=[];r._withStripped=!0;a(148);var i=a(69),o=a(1),s=a(70),c=a.n(s),l=a(199),u=a.n(l),d=(a(451),a(24)),m={name:"FotoPerfil",data:function(){return{data:{fotoPerfil:""},editar:!0,imagen:"",imagenUrl:"",valid:!0}},props:{lectura:{type:Boolean,default:!1,required:!1}},methods:Object(o["a"])({},Object(d["c"])(["cambiarFotoPerfil"]),{cargarImagen:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.imagen=e.target.files[0],r=new FileReader,a.next=4,r.readAsDataURL(t.imagen);case 4:r.onload=function(e){t.imagenUrl=e.target.result};case 5:case"end":return a.stop()}}),a)})))()},subirImagen:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("activarLoading",!0),a={mostrar:!0},t.prev=2,r=u.a.storage().ref().child(e.token).child("fotoPerfil"),t.next=6,r.put(e.imagen);case 6:return t.sent,t.next=9,r.getDownloadURL();case 9:return n=t.sent,e.data.fotoPerfil=n,i={headers:{"X-CSRF-Token":e.token,Accept:"application/json","Content-Type":"application/json"}},t.next=14,c.a.post("http://lucy-coatza.herokuapp.com/store/uploadImage",e.data,i);case 14:o=t.sent,console.log(o),e.cambiarFotoPerfil(n),a.msg=o.data.message,e.editar=!1,e.$emit("activarLoading",!1),e.$emit("activarMensaje",a),e.$emit("siguiente"),t.next=30;break;case 24:t.prev=24,t.t0=t["catch"](2),a.msg="Hubo un error al actualizar su información.",e.editar=!1,e.$emit("activarLoading",!1),e.$emit("activarMensaje",a);case 30:case"end":return t.stop()}}),t,null,[[2,24]])})))()},siguiente:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.subirImagen();case 1:case"end":return t.stop()}}),t)})))()},actualizar:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.subirImagen();case 1:case"end":return t.stop()}}),t)})))()}}),computed:Object(o["a"])({},Object(d["d"])(["sesion","usuario","token"])),created:function(){this.sesion&&(this.imagenUrl=this.usuario.fotoPerfil)}},f=m,v=(a(452),a(45)),p=a(46),g=a.n(p),b=a(185),h=a(180),w=a(413),k=a(415),x=a(181),j=a(257),_=a(416),y=Object(v["a"])(f,r,n,!1,null,"317319ed",null);g()(y,{VAvatar:b["a"],VBtn:h["a"],VCol:w["a"],VForm:k["a"],VIcon:x["a"],VImg:j["a"],VRow:_["a"]}),y.options.__file="src/components/formulario/FotoPerfil.vue";t["default"]=y.exports}}]);